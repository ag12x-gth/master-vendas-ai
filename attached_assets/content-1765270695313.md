[Skip to main content](https://docs.retellai.com/deploy/custom-telephony#content-area)

[Retell AI home page![light logo](https://mintcdn.com/retellai/_FxJdxv7mQoPqyGs/logo/logo-black.svg?fit=max&auto=format&n=_FxJdxv7mQoPqyGs&q=85&s=11dfae26479fc0bf0bf672443e7fc6d3)![dark logo](https://mintcdn.com/retellai/_FxJdxv7mQoPqyGs/logo/logo-white.svg?fit=max&auto=format&n=_FxJdxv7mQoPqyGs&q=85&s=8f464996a71744ac8fa6d086e39c46ce)](https://docs.retellai.com/)

Search...

⌘K

Search...

Navigation

Connect to custom telephony providers via SIP

Custom Telephony Overview

[Documentation](https://docs.retellai.com/general/introduction) [API Reference](https://docs.retellai.com/api-references/create-phone-call) [Video Tutorials](https://docs.retellai.com/videos/introduction) [Deprecation Notice](https://docs.retellai.com/deprecation-notice/11-30)

On this page

- [Overview](https://docs.retellai.com/deploy/custom-telephony#overview)
- [Method 1: Elastic SIP trunking (Recommended)](https://docs.retellai.com/deploy/custom-telephony#method-1%3A-elastic-sip-trunking-recommended)
- [Getting help](https://docs.retellai.com/deploy/custom-telephony#getting-help)
- [FAQ](https://docs.retellai.com/deploy/custom-telephony#faq)
- [Method 2: Dial to SIP URI](https://docs.retellai.com/deploy/custom-telephony#method-2%3A-dial-to-sip-uri)
- [Example Code](https://docs.retellai.com/deploy/custom-telephony#example-code)
- [FAQ](https://docs.retellai.com/deploy/custom-telephony#faq-2)
- [Video Tutorials](https://docs.retellai.com/deploy/custom-telephony#video-tutorials)
- [Elastic SIP Trunking](https://docs.retellai.com/deploy/custom-telephony#elastic-sip-trunking)
- [Dial to SIP URI](https://docs.retellai.com/deploy/custom-telephony#dial-to-sip-uri)

## [​](https://docs.retellai.com/deploy/custom-telephony\#overview)  Overview

In this guide, we will show how to integrate Retell agents with your telephony providers
and use your numbers. Please note that this is independent of the agent type you are using.We will provide two ways to integrate with your telephony provider:

1. **Elastic SIP trunking**: This is the **recommended** way to integrate with
your telephony provider that supports elastic SIP trunking. You will need to set up
a SIP trunking and configure your number to point to it, and then import that number
to Retell.
2. **Dial to SIP URI**: If your telephony provider does not support elastic SIP trunking,
or you have more complicated telephony setup that cannot use elastic SIP trunking,
you can dial the call to a specific SIP uri.

- Retell SIP server uri: `sip:sip.retellai.com`
- IP block for traffic: `18.98.16.120/30` (All regions), `143.223.88.0/21` (United States only), `161.115.160.0/19` (United States only)
- Some non US traffic might go from IPs not listed above, but will be migrated to the first IP block by 12/03/2025.

You can use the IP block to whitelist the traffic to Retell’s SIP server. It’s commonly needed in a bunch of telephony providers.

Transport method supported:

- TCP (Recommended)
- UDP
- TLS

For using the different transport for inbound calls, you can postpend the transport method to the sip server url:

- For TCP, the sip server url needs to be `sip:sip.retellai.com;transport=tcp`
- For UDP, the sip server url needs to be `sip:sip.retellai.com;transport=udp`
- For TLS, the sip server url needs to be `sip:sip.retellai.com;transport=tls`

Media encryption supported:

- SRTP

(Transport should be set to TLS to use SRTP)

## [​](https://docs.retellai.com/deploy/custom-telephony\#method-1:-elastic-sip-trunking-recommended)  Method 1: Elastic SIP trunking (Recommended)

Elastic SIP Trunking is a service offered by cloud communications platforms that enables
organizations to connect their existing PBX (Private Branch Exchange) or VoIP (Voice over IP)
infrastructure to the Public Switched Telephone Network (PSTN) over the internet using the
SIP (Session Initiation Protocol).In this context, the elastic SIP trunking is used to connect Retell’s VoIP with
PSTN so that your agents can make and receive calls. When using this method, all the telephony functionalities that are
supported by Retell numbers will also be supported here, assuming that your telephony provider supports it.SIP trunking is a popular service offered by many telephony providers, so most likely
your telephony provider would be able to support this.Here’re detailed guides for some telephony providers:

- [Twilio](https://docs.retellai.com/deploy/twilio)
- [Telnyx](https://docs.retellai.com/deploy/telnyx)
- [Vonage](https://docs.retellai.com/deploy/vonage)

### [​](https://docs.retellai.com/deploy/custom-telephony\#getting-help)  Getting help

If you are using a telephony provider that requires static IP address, and we don’t have a static IP address block for your region, or you are having trouble setting the connection up,
you can check out our partner [Jambonz](https://www.retellai.com/app-partner/jambonz), where you can
connect to Jambonz’s system that already connects with Retell (which supports static IP address, mutual TLS) and use their SIP trunking service.
Dedicated slack support channel is available for Retell users.

### [​](https://docs.retellai.com/deploy/custom-telephony\#faq)  FAQ

Will it throw errors if the details or configuration is incorrect?

No, Retell will not be able to know if the setup you provide works or not until a call is made.

My inbound call is not connecting, what should I do?

Please check your origination setting in your SIP trunking provider. Also check the logs in your telephony provider,
and perhaps open a ticket with them.

My outbound call is not connecting, what should I do?

Please check your termination setting in your SIP trunking provider, and make sure you provide the right termination url to Retell.
Also check the logs in your telephony provider, and perhaps open a ticket with them.

Will I be able to transfer call using SIP trunking?

Yes you can use the transfer call feature with SIP trunking. Please note that if you intend to use SIP REFER (cold transfer
with the transferee’s number), you will need to configure that in your SIP trunking provider to allow SIP REFER and PSTN transfer,
with the transferee’s number showing as caller id.

Will I be able to press digit using SIP trunking?

Yes, you can.

Can I view and manage the numbers I import using SIP trunking?

Yes, you can.

I need to change the configuration of the imported number, how can I do that?

Right now you’d need to delete and re-import the number.

## [​](https://docs.retellai.com/deploy/custom-telephony\#method-2:-dial-to-sip-uri)  Method 2: Dial to SIP URI

If your telephony provider does not support elastic SIP trunking, or you have more complicated
telephony setup that cannot use elastic SIP trunking, you can use this method.When using this method, Retell does not directly make or receive calls, but instead
relies on your system to dial the call to the respective SIP URI. This would require you to
have some codes to handle integration with your telephony provider. All traffic looks like
inbound to Retell in this case, so it’s up to you to specify the call direction.

When using this method, you will not be able to utilize Retell’s transfer call feature, as we do not
have access and control over the telephony provider and number, and cannot initiate transfer for you. You can however implement your own transfer logic and use a custom function to trigger a call transfer.

Here we assume you already have your call handling setup.
For Retell to know what agent to use to handle the call, and for you to
**obtain SIP URI to use** for this call, you would call the
[Register Phone Call API](https://docs.retellai.com/api-references/register-phone-call).
You will get a `call_id` back from this API, and you would use it to piece
together the SIP URI.

SIP URI: `sip:{call_id}@sip.retellai.com`

### [​](https://docs.retellai.com/deploy/custom-telephony\#example-code)  Example Code

Here’s an overly simplified example code to handle the inbound call
webhook from Twilio and dialing the call to the SIP URI.

Node

Copy

Ask AI

```
const client = new Retell({
  apiKey: 'YOUR_RETELL_API_KEY',
});

server.app.post(
  "/voice-webhook",
  async (req: Request, res: Response) => {
    // Register the phone call to get call id
    const phoneCallResponse = await client.call.registerPhoneCall({
      agent_id: 'oBeDLoLOeuAbiuaMFXRtDOLriTJ5tSxD',
      from_number: "+12137771234", // optional
      to_number: "+12137771235", // optional
      direction: "inbound", // optional
    });

    // Start phone call websocket
    const voiceResponse = new VoiceResponse();
    const dial = voiceResponse.dial();
    dial.sip(
      `sip:${phoneCallResponse.call_id}@sip.retellai.com`,
    );
    res.set("Content-Type", "text/xml");
    res.send(voiceResponse.toString());
  },
);
```

### [​](https://docs.retellai.com/deploy/custom-telephony\#faq-2)  FAQ

How to transfer call/end call using dial to SIP method?

You will need to handle the transfer call/end call logic yourself, meaning that you will need to write a custom function which internally
interacts with your telephony provider to transfer the call/end the call.

Will I be able to press digit using dial to SIP method?

Yes.

Two entries created for a single dial?

Check your code that interacts with telephony provider. Some provider like Twilio can call the webhook multiple times for a single call.
In those cases, you will need to dedupe the call.

Can I use telephony provider's other features like AMD detection using this method?

Yes, using this method basically gives you full control over telephony functionalities, so you should be able to use telephony provider’s
other features.

## [​](https://docs.retellai.com/deploy/custom-telephony\#video-tutorials)  Video Tutorials

### [​](https://docs.retellai.com/deploy/custom-telephony\#elastic-sip-trunking)  Elastic SIP Trunking

Twilio

Telnyx

Vonage

### [​](https://docs.retellai.com/deploy/custom-telephony\#dial-to-sip-uri)  Dial to SIP URI

Was this page helpful?

YesNo

[Purchase phone number](https://docs.retellai.com/deploy/purchase-number) [Twilio](https://docs.retellai.com/deploy/twilio)

⌘I